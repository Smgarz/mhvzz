!function(e){"use strict";e.fn.bjqs=function(t){var i=e.extend({},{width:700,height:300,animtype:"fade",animduration:400,animspeed:4e3,automatic:!0,showcontrols:!0,centercontrols:!0,nexttext:"Next",prevtext:"Prev",showmarkers:!0,centermarkers:!0,keyboardnav:!0,hoverpause:!0,usecaptions:!0,randomstart:!1,responsive:!1},t),n=this,h=n.find("ul.bjqs"),s=h.children("li"),d=null,a=null,r=null,c=null,l=null,o=null,u=null,g=null,w={slidecount:s.length,animating:!1,paused:!1,currentslide:1,nextslide:0,currentindex:0,nextindex:0,interval:null},p={width:null,height:null,ratio:null},f="forward",m="previous",x=function(){p.width=n.outerWidth(),p.ratio=p.width/i.width,p.height=i.height*p.ratio,"fade"===i.animtype&&(s.css({height:i.height,width:"100%"}),s.children("img").css({height:i.height,width:"100%"}),h.css({height:i.height,width:"100%"}),n.css({height:i.height,"max-width":i.width,position:"relative"}),p.width<i.width&&(s.css({height:p.height}),s.children("img").css({height:p.height}),h.css({height:p.height}),n.css({height:p.height})),e(window).resize((function(){p.width=n.outerWidth(),p.ratio=p.width/i.width,p.height=i.height*p.ratio,s.css({height:p.height}),s.children("img").css({height:p.height}),h.css({height:p.height}),n.css({height:p.height})}))),"slide"===i.animtype&&(s.css({height:i.height,width:i.width}),s.children("img").css({height:i.height,width:i.width}),h.css({height:i.height,width:i.width*i.slidecount}),n.css({height:i.height,"max-width":i.width,position:"relative"}),p.width<i.width&&(s.css({height:p.height}),s.children("img").css({height:p.height}),h.css({height:p.height}),n.css({height:p.height})),e(window).resize((function(){p.width=n.outerWidth(),p.ratio=p.width/i.width,p.height=i.height*p.ratio,s.css({height:p.height,width:p.width}),s.children("img").css({height:p.height,width:p.width}),h.css({height:p.height,width:p.width*i.slidecount}),n.css({height:p.height}),o.css({height:p.height,width:p.width}),v((function(){D(!1,w.currentslide)}),200,"some unique string")})))},v=function(){var e={};return function(t,i,n){n||(n="Don't call this twice without a uniqueId"),e[n]&&clearTimeout(e[n]),e[n]=setTimeout(t,i)}}(),q=function(){s.css({height:i.height,width:i.width}),h.css({height:i.height,width:i.width}),n.css({height:i.height,width:i.width,position:"relative"})},k=function(){u=s.eq(0).clone(),g=s.eq(w.slidecount-1).clone(),u.attr({"data-clone":"last","data-slide":0}).appendTo(h).show(),g.attr({"data-clone":"first","data-slide":0}).prependTo(h).show(),s=h.children("li"),w.slidecount=s.length,o=e('<div class="bjqs-wrapper"></div>'),i.responsive&&p.width<i.width?(o.css({width:p.width,height:p.height,overflow:"hidden",position:"relative"}),h.css({width:p.width*(w.slidecount+2),left:-p.width*w.currentslide})):(o.css({width:i.width,height:i.height,overflow:"hidden",position:"relative"}),h.css({width:i.width*(w.slidecount+2),left:-i.width*w.currentslide})),s.css({float:"left",position:"relative",display:"list-item"}),o.prependTo(n),h.appendTo(o)},y=function(){if(d=e('<ul class="bjqs-controls"></ul>'),a=e('<li class="bjqs-next"><a href="#" data-direction="'+f+'">'+i.nexttext+"</a></li>"),r=e('<li class="bjqs-prev"><a href="#" data-direction="'+m+'">'+i.prevtext+"</a></li>"),d.on("click","a",(function(t){t.preventDefault();var i=e(this).attr("data-direction");w.animating||(i===f&&D(f,!1),i===m&&D(m,!1))})),r.appendTo(d),a.appendTo(d),d.appendTo(n),i.centercontrols){d.addClass("v-centered");var t=(n.height()-a.children("a").outerHeight())/2/i.height*100+"%";a.find("a").css("top",t),r.find("a").css("top",t)}},T=function(){if(c=e('<ol class="bjqs-markers"></ol>'),e.each(s,(function(t,n){var h=t+1,s=t+1;"slide"===i.animtype&&(s=t+2);var d=e('<li><a href="#">'+h+"</a></li>");h===w.currentslide&&d.addClass("active-marker"),d.on("click","a",(function(e){e.preventDefault(),!w.animating&&w.currentslide!==s&&D(!1,s)})),d.appendTo(c)})),c.appendTo(n),l=c.find("li"),i.centermarkers){c.addClass("h-centered");var t=(i.width-c.width())/2;c.css("left",t)}},b=function(){e(document).keyup((function(e){w.paused||(clearInterval(w.interval),w.paused=!0),w.animating||(39===e.keyCode?(e.preventDefault(),D(f,!1)):37===e.keyCode&&(e.preventDefault(),D(m,!1))),w.paused&&i.automatic&&(w.interval=setInterval((function(){D(f)}),i.animspeed),w.paused=!1)}))},j=function(){n.hover((function(){w.paused||(clearInterval(w.interval),w.paused=!0)}),(function(){w.paused&&(w.interval=setInterval((function(){D(f,!1)}),i.animspeed),w.paused=!1)}))},C=function(){e.each(s,(function(t,i){var n=e(i).children("img:first-child").attr("title");n||(n=e(i).children("a").find("img:first-child").attr("title")),n&&(n=e('<p class="bjqs-caption">'+n+"</p>")).appendTo(e(i))}))},I=function(){var e=Math.floor(Math.random()*w.slidecount)+1;w.currentslide=e,w.currentindex=e-1},D=function(e,t){if(!w.animating&&(w.animating=!0,t?(w.nextslide=t,w.nextindex=t-1):function(e){e===f?s.eq(w.currentindex).next().length?(w.nextindex=w.currentindex+1,w.nextslide=w.currentslide+1):(w.nextindex=0,w.nextslide=1):s.eq(w.currentindex).prev().length?(w.nextindex=w.currentindex-1,w.nextslide=w.currentslide-1):(w.nextindex=w.slidecount-1,w.nextslide=w.slidecount)}(e),"fade"===i.animtype&&(i.showmarkers&&(l.removeClass("active-marker"),l.eq(w.nextindex).addClass("active-marker")),s.eq(w.currentindex).fadeOut(i.animduration),s.eq(w.nextindex).fadeIn(i.animduration,(function(){w.animating=!1,w.currentslide=w.nextslide,w.currentindex=w.nextindex}))),"slide"===i.animtype)){if(i.showmarkers){var n=w.nextindex-1;n===w.slidecount-2?n=0:-1===n&&(n=w.slidecount-3),l.removeClass("active-marker"),l.eq(n).addClass("active-marker")}i.responsive&&p.width<i.width?w.slidewidth=p.width:w.slidewidth=i.width,h.animate({left:-w.nextindex*w.slidewidth},i.animduration,(function(){w.currentslide=w.nextslide,w.currentindex=w.nextindex,"last"===s.eq(w.currentindex).attr("data-clone")?(h.css({left:-w.slidewidth}),w.currentslide=2,w.currentindex=1):"first"===s.eq(w.currentindex).attr("data-clone")&&(h.css({left:-w.slidewidth*(w.slidecount-2)}),w.currentslide=w.slidecount-1,w.currentindex=w.slidecount-2),w.animating=!1}))}};s.addClass("bjqs-slide"),i.responsive?x():q(),w.slidecount>1&&(i.randomstart&&I(),i.showcontrols&&y(),i.showmarkers&&T(),i.keyboardnav&&b(),i.hoverpause&&i.automatic&&j(),"slide"===i.animtype&&k()),i.usecaptions&&C(),"slide"!==i.animtype||i.randomstart||(w.currentindex=1,w.currentslide=2),h.show(),s.eq(w.currentindex).show(),i.automatic&&(w.interval=setInterval((function(){D(f,!1)}),i.animspeed))}}(jQuery);